import { TransformPoint } from "./transform-filter";

const FACE_TRIANGLE_INDICES = [
  86, 96, 95,
  86, 95, 94,
  94, 95, 89,
  95, 96, 89,
  96, 25, 89,
  25, 24, 89,
  24, 84, 89,
  96, 26, 25,
  96, 19, 26,
  96, 90, 19,
  26, 19, 20,
  26, 25, 20,
  25, 20, 21,
  25, 24, 21,
  21, 24, 22,
  24, 22, 23,
  24, 23, 84,
  90, 19, 42,
  19, 20, 42,
  20, 21, 42,
  21, 42, 41,
  21, 22, 41,
  22, 41, 40,
  22, 23, 40,
  23, 40, 39,
  23, 39, 55,
  23, 55, 83,
  23, 84, 83,
  90, 35, 42,
  42, 35, 36,
  42, 36, 43,
  42, 41, 43,
  41, 43, 40,
  36, 43, 37,
  43, 37, 40,
  40, 37, 38,
  40, 38, 39,
  90, 0, 35,
  0, 1, 35,
  1, 35, 36,
  1, 36, 37,
  1, 2, 37,
  2, 37, 56,
  37, 38, 56,
  38, 39, 56,
  39, 55, 56,
  55, 83, 56,
  83, 56, 64,
  2, 3, 56,
  3, 56, 57,
  56, 57, 64,
  3, 4, 57,
  4, 57, 65,
  57, 65, 75,
  57, 75, 76,
  57, 76, 85,
  57, 58, 64,
  58, 64, 59,
  57, 58, 85,
  58, 59, 85,
  85, 76, 77,
  65, 75, 74,
  74, 75, 76,
  74, 76, 77,
  74, 77, 73,
  4, 5, 65,
  5, 6, 65,
  6, 65, 67,
  6, 7, 67,
  65, 67, 74,
  74, 67, 68,
  74, 68, 73,
  68, 69, 73,
  7, 67, 68,
  7, 8, 68,
  8, 9, 68,
  68, 69, 9,
  88, 94, 92,
  88, 93, 92,
  94, 89, 92,
  89, 92, 93,
  89, 33, 93,
  89, 32, 33,
  89, 84, 32,
  93, 33, 34,
  93, 34, 27,
  93, 27, 91,
  34, 28, 27,
  34, 29, 28,
  33, 29, 34,
  30, 33, 29,
  32, 30, 33,
  31, 32, 30,
  84, 31, 32,
  84, 83, 31,
  31, 83, 63,
  31, 63, 49,
  31, 49, 50,
  31, 30, 50,
  30, 50, 51,
  30, 51, 29,
  29, 51, 52,
  29, 28, 52,
  28, 27, 52,
  27, 91, 52,
  52, 45, 91,
  91, 45, 18,
  45, 46, 18,
  52, 46, 45,
  51, 52, 46,
  51, 53, 46,
  50, 51, 53,
  53, 47, 46,
  50, 47, 53,
  50, 48, 47,
  50, 49, 48,
  46, 17, 18,
  47, 46, 17,
  47, 62, 17,
  48, 47, 62,
  49, 48, 62,
  63, 49, 62,
  83, 63, 62,
  83, 64, 62,
  62, 64, 61,
  62, 61, 15,
  62, 15, 16,
  62, 16, 17,
  64, 59, 60,
  64, 60, 61,
  59, 60, 85,
  60, 85, 61,
  85, 78, 61,
  85, 77, 78,
  61, 78, 79,
  61, 79, 66,
  61, 66, 15,
  66, 15, 14,
  66, 13, 14,
  66, 12, 13,
  66, 71, 12,
  77, 78, 72,
  78, 79, 72,
  79, 66, 72,
  77, 73, 72,
  73, 69, 70,
  73, 72, 70,
  72, 70, 71,
  72, 71, 66,
  9, 69, 70,
  9, 10, 70,
  10, 11, 70,
  11, 70, 71,
  11, 12, 71,
  // Edge triangles
  97, 104, 86,
  104, 86, 94,
  104, 94, 88,
  104, 103, 88,
  103, 88, 93,
  103, 93, 91,
  103, 102, 91,
  102, 91, 18,
  102, 18, 17,
  102, 17, 16,
  102, 16, 15,
  102, 15, 14,
  102, 101, 14,
  101, 14, 13,
  101, 13, 12,
  101, 100, 12,
  100, 12, 11,
  100, 11, 10,
  100, 10, 9,
  100, 9, 8,
  100, 8, 7,
  100, 7, 6,
  100, 99, 6,
  99, 6, 5,
  99, 5, 4,
  99, 98, 4,
  98, 4, 3,
  98, 3, 2,
  98, 2, 1,
  98, 1, 0,
  98, 0, 90,
  98, 90, 96,
  98, 96, 86,
  98, 97, 86
]

export function buildFaceTrianglesFromFacePoints(points: TransformPoint[]): number[] {
  let result: number[] = [];

  for (let i = 0; i <= FACE_TRIANGLE_INDICES.length - 3; i += 3) {
    let firstPointIndex = FACE_TRIANGLE_INDICES[i];
    let secondPointIndex = FACE_TRIANGLE_INDICES[i + 1];
    let thirdPointIndex = FACE_TRIANGLE_INDICES[i + 2];

    let firstPoint = points[firstPointIndex];
    let secondPoint = points[secondPointIndex];
    let thirdPoint = points[thirdPointIndex];

    result.push(firstPoint.x, firstPoint.y);
    result.push(secondPoint.x, secondPoint.y);
    result.push(thirdPoint.x, thirdPoint.y);
  }

  return result;
}
